<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Pony IDE</title>
    <meta name="title" content="Pony IDE">


    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#117cff">
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml">
    <meta name="theme-color" content="#117cff">



    <!-- OG SECTION -->
    <meta property="og:title" content="Pony IDE" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://lua.flaffipony.rocks/" />
    <meta property="og:image" content="https://lua.flaffipony.rocks/images/og.jpg" />
    <meta property="og:description" content="Create, Run and Share your lua scripts for Stormworks: Build and Rescue! 
You can also minify code, find tutorials and examples or use the ui builder to create lua scripts without any programming skills." />



    <link rel="stylesheet" type="text/css" href="stylesheets/style_client.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/iconfont.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/jquery_ui.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/incognito.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/ui_elements.css">

    <!-- external libs -->
    <script type="text/javascript" src="scripts/jquery.js"></script>
    <script type="text/javascript" src="scripts/jquery_ui.js"></script>
    <script type="text/javascript" id="fengari-script" src="scripts/fengari_web.js"></script>

    <!-- my scripts -->
    <script type="text/javascript" src="scripts/loader.js"></script>

    <!-- scripts without loading -->
    <script type="text/javascript" src="scripts/util.js"></script>
    <script type="text/javascript" src="scripts/translate.js"></script>
    <script type="text/javascript" src="scripts/reporter.js"></script>
    <script type="text/javascript" src="scripts/http_localhost.js"></script>
    <script type="text/javascript" src="scripts/paint.js"></script>
    <script type="text/javascript" src="scripts/map.js"></script>
    <script type="text/javascript" src="scripts/luaparse.js"></script>
    <script type="text/javascript" src="scripts/luamin.js"></script>
    <script type="text/javascript" src="scripts/luaminy.js"></script>
    <script type="text/javascript" src="scripts/luamax.js"></script>
    <script type="text/javascript" src="scripts/minmax.js"></script>


    <!-- scripts with loading, more ore less ordered -->
    <script type="text/javascript" src="scripts/giveaway.js"></script>
    <script type="text/javascript" src="scripts/lua_emulator.js"></script>
    <script type="text/javascript" src="scripts/stormworks_lua_api.js"></script>
    <script type="text/javascript" src="scripts/storage.js"></script>
    
    <script type="text/javascript" src="scripts/share.js"></script>

    <script type="text/javascript" src="scripts/ui.js"></script>

    <script type="text/javascript" src="scripts/ui_builder.js"></script>
    <script type="text/javascript" src="scripts/lua_console.js"></script>
    <script type="text/javascript" src="scripts/examples.js"></script>
    <script type="text/javascript" src="scripts/editor.js"></script>
    <script type="text/javascript" src="scripts/autocompletion.js"></script>
    <script type="text/javascript" src="scripts/documentation.js"></script>
    <script type="text/javascript" src="scripts/yyy.js"></script>
    <script type="text/javascript" src="scripts/engine.js"></script>

    <script type="text/javascript" src="scripts/input.js"></script>
    <script type="text/javascript" src="scripts/output.js"></script>
    <script type="text/javascript" src="scripts/property.js"></script>
    <script type="text/javascript" src="scripts/canvas.js"></script>



    <!-- other scripts -->    
    <script type="text/javascript" src="scripts/documentation_definition_client.js"></script>

    <!--<script type="text/javascript" src="https://statistics.flaffipony.rocks/tracking.js"></script>-->
</head>
<body>
    <script type="text/javascript">
        if(new URLSearchParams(window.location.search).has("incognito")){
            /*let link = document.createElement('link', )
            link.setAttribute('rel', 'stylesheet')
            link.setAttribute('type', 'text/css')
            link.setAttribute('href', 'stylesheets/incognito.css')
            document.head.appendChild(link)*/
            document.body.className += " incognito "
        }
    </script>
    <div id="mobile-menu">
        <div id="mobile-menu-inner">
            <div class="mobile_menu_logo">
                <img src="images/pony.png">
            </div>
            <div class="menu_group">
                <div class="menu_group_title">Page Navigation</div>
                <a href="#editor">Code</a>
                <a href="#documentation">Available Functions</a>
                <div id="learn-menu-entry"><span>Learn & Examples</span></div>
                <div id="help-menu-entry"><span>Help / Manual</span></div>
                <a href="http-allow-localhost">How to use Stormworks HTTP API</a>
                <a href="?incognito">@work mode (no fancy colors)</a>
            </div>
            <div class="menu_group">
                <div class="menu_group_title">Contact me</div>
                <span>Discord: CrazyFluffyPony#0587</span>
                <a href="mailto://crazyfluffypony@gmail.com">crazyfluffypony@gmail.com</a>
            </div>
            <div class="menu_group">
                <div class="menu_group_title">Other Information</div>
                <a href="https://stormworks.flaffipony.rocks/" target="_blank">All Stormworks Tools</a>
                <a href="https://www.lua.org/manual/5.3/" target="_blank" rel="noopener noreferrer">Official Lua manual</a>
                <a target="_blank" rel="noopener noreferrer" href="https://gitlab.com/stormworks-tools/editor">View source code</a>
                <a href="https://gitlab.com/stormworks-tools/editor/-/archive/master/editor-master.zip" download="" rel="nofollow">Download for offline use</a>
            </div>
        </div>
        <div id="mobile-menu-close-sidebar"></div>
    </div>
    <div id="navigation">
        <div id="mobile-menu-open"></div>
        <div id="logo"></div>        
    </div>

    <div class="ide">
        <div class="ide_bar">
            <div class="ide_controls">
                <div class="controls_group">
                    <button id="save" title="Save"><span class="icon-floppy-disk"></span></button> 
                    <button id="reset" title="Reset">Reset</button>
                </div>
                <div class="controls_group">
                    <button id="start" title="Start"><span class="icon-play3"></span></button>
                    <button id="pause" class="special_button" title="Pause"><span class="icon-pause2"></span></button>
                    <button id="step" class="special_button" title="Step forward"><span class="icon-next2"></span></button>
                    <button id="stop" title="Stop"><span class="icon-stop2"></span></button>   
                </div>
                <div class="controls_group share" id="share">
                    <button class="docreate special_button">
                        Share
                    </button>
                    <div class="more">
                        <div class="currentshare_container">
                            <input type="text" class="currentshare" name="currentshare"/>
                            <span class="copy_share_to_clipboard">Copy</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ide_flex_view">
            <div view="top_left"></div>
            <div view="top_right"></div>
            <div view="bottom_left"></div>
            <div view="bottom_right"></div>

            <div splitter="vertical"></div>
            <div splitter="horizontal_left"></div>
            <div splitter="horizontal_right"></div>
        </div>
    </div>

    
    

    <!--
        INVISIBLE STUFF
    -->

    <div style="display: none;">
        <div id="monitor-container" viewable="viewable_monitor">
            <div id="monitor">
                <canvas id="canvas"></canvas>
                <div id="overflow"></div>
            </div>
            <div class="monitor_info">
                <div>
                    <label>Width:</label>
                    <span class="width">0</span>
                </div>
                <div>
                    <label>Height:</label>
                    <span class="height">0</span>
                </div>
                <div>
                    <label>Zoom:</label><span class="zoom">3x</span>
                    <input type="range" min="1" max="4" id="zoomfactor" name="zoomfactor" value="1">
                </div>
            </div>
            <canvas id="render-canvas"></canvas>
        </div>

        <div class="settings_list" viewable="viewable_settings">
            <div class="setting">
                <label for="monitor-size">Monitor</label>
                <select id="monitor-size" name="monitor-size">
                    <option value="1x1">1x1</option>
                    <option value="2x2">2x2</option>
                    <option value="3x3">3x3</option>
                    <option value="5x3">5x3</option>
                    <option value="9x5">9x5</option>
                </select>
            </div>
            <div class="setting">
                <label for="show-overflow">Show overflow</label>
                <input type="checkbox" id="show-overflow" name="show-overflow" checked>
            </div>
            <div class="setting" id="enable-touchscreen-container">
                <div>
                    <label for="enable-touchscreen">Enable Touchscreen</label>
                    <input type="checkbox" id="enable-touchscreen" name="enable-touchscreen">
                    <div class="enable_touchscreen_hint">Enable the touchscreen to enable interaction.</div>
                </div>
                <div>
                    <label for="enable-touchscreen-secondary">Enable Secondary Input</label>
                    <input type="checkbox" id="enable-touchscreen-secondary" name="enable-touchscreen-secondary" checked="true">
                </div>
            </div>
            <div class="setting">
                <div class="time_between">
                    <label>Ticks per second: <span id="timeBetweenTicksVal">59</span></label>
                    <input type="range" min="16" max="250" value="16" id="timeBetweenTicks">
                    <span>Average TPS: <span id="ticktime">0</span></span>
                </div>
            </div>        
            <div class="setting"> 
                <div class="time_between">
                    <label>Frames per Second: <span id="timeBetweenDrawsVal">59</span></label>
                    <input type="range" min="16" max="250" value="16" id="timeBetweenDraws">
                    <span>Average FPS: <span id="drawtime">0</span></span>
                </div>
            </div>
        </div>

        <div id="out" viewable="viewable_console">
            <h3>Console Output:</h3>
            <div id="console">
                <div id="console-inner"></div>
                <span class="console_clear icon-bin"></span>
            </div>
        </div>

        <div id="property" class="value_list" viewable="viewable_properties"></div>

        <div id="input" class="value_list" viewable="viewable_inputs"></div>

        <div id="output" class="value_list" viewable="viewable_outputs"></div>

        <div id="documentation" viewable="viewable_documentation">
            <h2>Available functions:</h2>
        </div>

        <div viewable="viewable_official_manuals">
            <p><b>Official Lua Language Manual:</b><br>
                <a href="https://www.lua.org/manual/5.3/" target="_blank" rel="noopener noreferrer">https://www.lua.org/manual/5.3/</a>
            </p>
            <p><b>Stormworks Lua Manual</b><br>
                TODO
            </p>
        </div>

        

        <div id="editor" viewable="viewable_editor_normal">
            <div class="code_container">
                <div class="above_code">                        
                    <div>
                        <button id="minify">Minify</button>                
                        <select id="minify-type">
                            <optgroup label="Conservative">
                                <option value="conservative-with-line-breaks">Consv. with line breaks</option>
                                <option value="conservative-no-line-breaks">Consv. no line breaks</option>
                            </optgroup>
                            <optgroup label="Agressive">
                                <option value="agressive-with-line-breaks">Agrs. with line breaks</option>
                                <option value="agressive-no-line-breaks">Agrs. no line breaks</option>
                            </optgroup>
                        </select>
                        <span id="minify-help" class="icon-question"></span>
                    </div>
                </div>
                <div class="code_information">
                    <span class="selection-information">Line 0, Column 0, Char 0</span>
                    <span class="autocompletition-hint">Autocomplete: right click, Ctrl+Space or Command+Space</span>
                    <span class="charactercount">0/4096</span>
                </div>
                <div id="code" code-field="normal">
function onTick()
    -- your code
end

function onDraw()
    -- your code
end

function httpReply(port, request_body, response_body)
    -- your code
    --
    -- IMPORTANT: You must follow these steps to enable http support in this Lua IDE:
    -- the first time you run asyn.httpGet() a popup will explain you what to do
    --
end
</div>
                <div class="code_lock"></div>
                <div id="autocompletition-container"></div>
            </div>
        </div>

        <div id="minified-editor" viewable="viewable_editor_minified">
            <div class="code_container">
                <div class="above_code">
                    <button id="unminify">Unminify (beta)</button>

                    <div class="custom_hint" style="display: none;">
                        You are using custom minified code! It will be overwritten when minifying the next time!<br>When sharing the original code as well as the custom minified code will be shared.
                    </div>
                </div>
                <div class="code_information">
                    <span class="selection-information">Line 0, Column 0, Char 0</span>
                    <span class="autocompletition-hint">Autocomplete: right click, Ctrl+Space or Command+Space</span>
                    <span class="charactercount">0/4096</span>
                </div>
                <div id="minified-code" code-field="minified"></div>
                <div class="code_lock"></div>
            </div>
        </div>

        <div id="unminified-editor" viewable="viewable_editor_unminified">
            <div class="code_container">
                <div class="above_code">

                </div>
                <div class="code_information">
                    <span class="selection-information">Line 0, Column 0, Char 0</span>
                    <span class="autocompletition-hint">Autocomplete: right click, Ctrl+Space or Command+Space</span>
                    <span class="charactercount">0/4096</span>
                </div>
                <div id="unminified-code" code-field="unminified"></div>
            </div>
        </div>

        <div id="ui-builder" viewable="viewable_editor_uibuilder">
            <div id="ui-builder-container"></div>
            <div id="ui-builder-controls">
                <div class="ui_builder_zoom controls_container">
                    <label for="ui-builder-zoom">UI Builder Zoom: <span>1x</span></label>
                    <input type="range" min="1" max="4" value="1" name="ui-builder-zoom" id="ui-builder-zoom">
                </div>
                <div class="controls_container">
                    <button id="generate-ui-builder-lua-code">Generate Lua Code</button>
                </div>
            </div>
            <div id="ui-builder-code" code-field="uibuilder" style="display: none;"></div>
        </div>
    </div>

        

    <div id="fixed-information-badges">
        <div id="learn-badge" class="hoverable">
            <div>
                <span class="icon-books"></span>
                <div style="display: flex;flex-direction: column;">
                    <span class="heading">Learn &</span>
                    <span class="heading">Examples</span>
                </div>
            </div>
        </div>
        <div id="help-badge" class="hoverable">
            <div>
                <span class="icon-question"></span>
                 <div style="display: flex;flex-direction: column;">
                    <span class="heading">Help /</span>
                    <span class="heading">Manual</span>
                </div>
            </div>
        </div>
        <div>
            <span class="heading">Contact me</span>
            <div class="discord"><img src="images/discord.png">CrazyFluffyPony#0587</div>
            <div class="email"><span class="icon-mail"></span><a href="mailto://crazyfluffypony@gmail.com">crazyfluffypony@gmail.com</a></div>
        </div>
    </div>


    <script src="ace-builds/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="ace-builds/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
    
    <div id="help" style="display: none;">
        <div id="help-content">
            <span id="help-close" class="icon-cross"></span>
            <div class="section">
                <h3>Short introduction into the page:</h3>
                <div id="help-youtube-video">https://www.youtube.com/watch?v=Z8cLxmVd07c</div>
            </div>
            <div class="section">
                <h3>Lua</h3>
                <p>
                    You can find the complete documentation and some examples on the official lua website:
                    <a href="https://www.lua.org/manual/5.3/" target="_blank" rel="noopener noreferrer">https://www.lua.org/manual/5.3/</a>
                </p>
            </div>
            <div class="section">
                <h3>Monitor, Properties, Inputs, Outputs ...</h3>
                <br>
                <h4>Monitor</h5>
                <p>
                    You can select different monitor sizes. On zoom=1 one pixel of the monitor is exactly one pixel of your real monitor. You can zoom the monitor for easier development (this does not influence the screen.getHeight() in the lua script!).
                </p>
                <h4>Properties</h5>
                <p>
                    Like in the game you can set properties. Choose a property type, then write the label of the property into the input field of the property type you want. Depending on the type you can now set the value of the property: boolean, number or text.
                </p>
                <h4>Inputs</h5>
                <p>
                   The inputs simulate the lua scripts input composite. To write a value to the composite select the channel on the type of composite you want to have (boolean or number). Then You can enter the value for that channel.
                   <b>Numbers</b> have an additional settings button where you can switch between normal number input and slider. You can also activate the oscilate function for this input. Oscilate means the input value will change every tick by the set step. Once it reaches the upper or lower limit it will change direction.
                </p>
                <h4>Outputs</h5>
                <p>
                    This simulates the lua scripts output composite. When the lua script assigns values to the output, they will show up here.                    
                </p>
            </div>
            <div class="section">
                <h3>Touchscreen</h3>
                <p>
                    Enable the touchscreen by checking the "touchscreen" checkmark above the monitor. Hover with your mouse ofer the monitor and press e/q keys.
                </p>
            </div>
            <div class="section">
                <h3>Code Editor</h3>
                <p>
                    The code editor has more functionality than you would expect. Most of them are similar to Sublime Text 3:
                    <ul>
                        <li>Multiselect (Hold ctrl and click)</li>
                        <li>Search and Replace (Ctrl + F, Ctrl + H)</li>
                        <li>Undo, Redo (Ctrl + Z, Ctrl + Y)</li>
                        <li>Autocompletition (Ctrl + Space)</li>
                    </ul>
                </p>
            </div>
            <div class="section">
                <h3>Minifying</h3>
                <p>
                    The more complicated your code is the higher is the risk of something not working after minifying it.
                    <br>
                    Always test your code after minifying it!
                    <br>
                    <br>
                    When your code is exceeding the maximum length allowed in Stormworks you have several options:
                    <ul>
                        <li>Edit the code manually and shorten variable names or function names</li>
                        <li>Split up your code into 2 or more parts which then run in different luascript components ingame</li>
                        <li>Click the minify button (for better reading you can check the option "Line breaks")</li>
                    </ul>
                    If you used the minify button then your minified code will appear below the original code.
                    You will propably see that the minified code has less characters then the original one.
                </p>
            </div>
            <div class="section">
                <h3>Unminifying</h3>
                <p>
                    Prints the code in the best readable way.
                    <br>
                    <br>
                    In case you minified the code with this website, it will also replace shortcuts back into readable names.<br>
                    <b>Example:</b><br>
                    e.g(1,y) => output.setNumber(1,y)
                </p>
            </div>
            <div class="section">
                <h3>Sharing</h3>
                <p>Sharing your code with other people is pretty easy:
                    <ul>
                        <li>Write your code or paste it into the code editor</li>
                        <li>Adjust all the settings (monitor size, inputs, properties, time between draws) as you need them</li>
                        <li>Click the blueish share button and a url is generated</li>
                        <li>Send this url to other people</li>
                        <li>When they open the url they will see your code as well as all of your settings</li>
                    </ul>
                    <br>
                    <b>Hint: You cannot change anything you shared</b>
                    <br>
                    <i>(because we do not know if you are the owner of the code)</i>
                </p>
            </div>
            <div class="section">
                <h3>UI Builder</h3>
                <p>You are not familiar with coding? No problem, use the UI Builder!
                    <br>
                    <br>
                    <b>Watch the above video at 3:50</b>
                </p>
            </div>
        </div>
    </div>

    <img src="images/map.png" id="map" style="display: none;">

    <div style="display: none" id="ponybin-create-overlay" class="ponybin_overlay">
        <div class="inner">
            <div class="circle">
                <p>Pushing code to Ponybin<span dot="1">.</span><span dot="2">.</span><span dot="3">.</span></p>
            </div>
        </div>
    </div>
    <div style="display: none" id="ponybin-receive-overlay" class="ponybin_overlay">
        <div class="inner">
            <div class="circle">
                <p>Receiving code from Ponybin<span dot="1">.</span><span dot="2">.</span><span dot="3">.</span></p>
            </div>
        </div>
    </div>

    <div style="display: none" id="message" class="dialog">
        <div class="inner">
            <h3 class="title"></h3>
            <div class="message">
            </div>
            <div class="buttons">
                <button class="ok">Ok</button>
            </div>
        </div>
    </div>

    <div style="display: none" id="confirm" class="dialog">
        <div class="inner">
            <h3 class="title">Confirm action:</h3>
            <div class="message">
            </div>
            <div class="buttons">
                <button class="yes">Yes</button>
                <button class="no">No</button>
            </div>
        </div>
    </div>

    <div style="display: none" id="alert" class="dialog">
        <div class="inner">
            <h3 class="title">Alert:</h3>
            <div class="message">
            </div>
            <div class="buttons">
                <button class="ok">Ok</button>
            </div>
        </div>
    </div>

    <div style="display: none;" id="giveaway-container" class="dialog">
        <div class="inner">
            <h3 class="title">Pony has a giveaway for you!</h3>
            <div class="message"></div>
            <div class="claimed_by_container">
                <label>Your Discord Tag or email (so i can send you the giveaway):</label>
                <input type="text" name="giveaway-claimed-by" class="claimed_by" placeholder="CrazyFluffyPony#0587">
            </div>
            <div class="error" style="display: none;">Error occured</div>
            <div class="progress" style="display: none;">Claiming ...</div>
            <div class="success" style="display: none;">
                You claimed the giveaway!<br>I will contact you soon!
            </div>
            <div class="buttons">
                <button class="cancel">Cancel</button>
                <button class="reload" style="display: none;">Reload</button>
                <button class="send">Send</button>
                <button class="close" style="display: none;">Close</button>
            </div>
        </div>
    </div>

    <div id="hints-container"></div>


<!--
    <script type="text/javascript" src="https://stormworks.flaffipony.rocks/embed_overview.js"></script>
   <script type="text/javascript" src="https://stormworks.flaffipony.rocks/embed_public_server.js"></script>
-->
</body>
</html>
